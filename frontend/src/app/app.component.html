
<mat-toolbar>

  <span>Magic</span>
  <span class="example-fill-remaining-space"></span>

  <a 
    *ngIf="isLoggedIn()"
    mat-button 
    routerLink="/" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">Home</a>

  <a 
    *ngIf="isLoggedIn() && hasDefaultPassword()"
    mat-button 
    routerLink="/setup" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">Setup</a>

  <a 
    *ngIf="isLoggedIn()"
    mat-button 
    routerLink="/crudify" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">Crudify</a>

  <a 
    *ngIf="isLoggedIn()"
    mat-button 
    routerLink="/endpoints" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">Endpoints</a>

  <a 
    *ngIf="isLoggedIn()"
    mat-button 
    routerLink="/tasks" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">Tasks</a>

  <a 
    *ngIf="isLoggedIn()"
    mat-button 
    routerLink="/files" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">Files</a>

  <a 
    *ngIf="isLoggedIn()"
    mat-button 
    routerLink="/evaluator" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">Evaluator</a>

  <a 
    *ngIf="isLoggedIn() && !hasDefaultPassword()"
    mat-button 
    routerLink="/users" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">Users</a>

  <a 
    *ngIf="isLoggedIn() && !hasDefaultPassword()"
    mat-button 
    routerLink="/roles" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">Roles</a>

  <a 
    *ngIf="isLoggedIn()"
    mat-button 
    routerLink="/sql" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">SQL</a>

  <a 
    *ngIf="isLoggedIn()"
    mat-button 
    routerLink="/logs" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">Logs</a>

  <a 
    *ngIf="isLoggedIn()"
    mat-button 
    routerLink="/crypto" 
    routerLinkActive="active-link" 
    [routerLinkActiveOptions]="{exact:true}">Crypto</a>

  <a
    *ngIf="isLoggedIn()"
    mat-button
    (click)="logout()">Logout</a>

</mat-toolbar>

<div *ngIf="isLoggedIn()" class="content">
  <router-outlet></router-outlet>
</div>

<div *ngIf="!isLoggedIn()" [ngClass]="connectedToBackend ? '' : 'warning'">

  <div class="login-card mat-elevation-z4">

    <div class="help">
      <mat-icon
        (click)="showHelp()">help</mat-icon>
    </div>

    <mat-form-field class="fill-width">
      <input 
        matInput 
        placeholder="Backend URL"
        type="text"
        (change)="backendUrlChanged()"
        [(ngModel)]="backendUrl">
    </mat-form-field>

    <mat-form-field class="fill-width">
      <input 
        matInput 
        placeholder="Username"
        autocomplete="off"
        type="text" 
        [(ngModel)]="username">
    </mat-form-field>

    <mat-form-field class="fill-width">
      <input 
        matInput 
        placeholder="Password"
        autocomplete="new-password"
        type="password" 
        [(ngModel)]="password">
    </mat-form-field>

    <button
      [disabled]="!connectedToBackend"
      mat-raised-button
      color="primary"
      class="login-button"
      (click)="login()"
      matTooltip="Login to your Magic installation">Login</button>

  </div>

</div>
