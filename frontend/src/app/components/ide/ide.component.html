
<div [class]="showExplorer ? 'wrapper' : 'wrapper-full'">

  <mat-card
    class="files-section"
    *ngIf="showExplorer">

    <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">

      <mat-tree-node
        *matTreeNodeDef="let file"
        matTreeNodePadding
        matTreeNodePaddingIndent="10">

        <button
          class="file-btn"
          [color]="activeFile === file.node.path ? 'primary' : 'default'"
          mat-stroked-button
          (click)="openFile(file.node)">{{file.name}}</button>

      </mat-tree-node>

      <mat-tree-node
        *matTreeNodeDef="let folder; when: hasChild"
        matTreeNodePadding
        matTreeNodePaddingIndent="10">

        <mat-icon class="mat-icon-rtl-mirror">
          {{treeControl.isExpanded(folder) ? 'expand_more' : 'chevron_right'}}
        </mat-icon>

        <button
          matTreeNodeToggle
          class="folder-btn"
          mat-button>
          {{folder.name}}
        </button>

      </mat-tree-node>

    </mat-tree>

  </mat-card>

  <mat-card [class]="showExplorer ? 'content-section' : 'content-section-full'">

    <button
      mat-icon-button
      class="toggle-explorer"
      (click)="toggleFileExplorer()">
      <mat-icon>all_out</mat-icon>
    </button>

    <div class="tab-buttons">

      <button
        *ngFor="let file of files"
        mat-raised-button
        [color]="activeFile === file.path ? 'primary' : 'default'"
        (click)="activateFile(file)"
        [matTooltip]="file.path">
        {{file.name}}
      </button>

    </div>

    <div *ngFor="let file of files">

      <div *ngIf="file.path === activeFile">

        <ngx-codemirror
          [(ngModel)]="file.content"
          [options]="file.options">
        </ngx-codemirror>

      </div>

    </div>

  </mat-card>

</div>
