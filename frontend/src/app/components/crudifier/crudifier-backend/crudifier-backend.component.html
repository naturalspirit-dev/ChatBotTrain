
<mat-form-field class="form-field" appearance="outline">

  <mat-label>Database</mat-label>
  <mat-select
    [(ngModel)]="databaseType"
    (selectionChange)="databaseTypeChanged()">
    <mat-option
      *ngFor="let idx of databaseTypes"
      [value]="idx">{{idx}}</mat-option>
  </mat-select>

</mat-form-field>

<mat-form-field *ngIf="databaseType && connectionStrings.length > 0" class="form-field" appearance="outline">

  <mat-label>Connection</mat-label>
  <mat-select
    [(ngModel)]="connectionString"
    (selectionChange)="connectionStringChanged()">
    <mat-option
      *ngFor="let idx of connectionStrings"
      [value]="idx">{{idx}}</mat-option>
  </mat-select>

</mat-form-field>

<mat-form-field *ngIf="connectionString && databases && databases.databases.length > 0" class="form-field" appearance="outline">

  <mat-label>Database</mat-label>
  <mat-select
    [(ngModel)]="database"
    (selectionChange)="databaseChanged()">
    <mat-option
      *ngFor="let idx of databases.databases"
      [value]="idx"
      [class]="getDatabaseCssClass(idx.name)">{{idx.name}}</mat-option>
  </mat-select>

</mat-form-field>

<mat-form-field *ngIf="database && database.tables && database.tables.length > 0" class="form-field" appearance="outline">

  <mat-label>Table</mat-label>
  <mat-select
    [(ngModel)]="table"
    (selectionChange)="tableChanged()">
    <mat-option
      *ngFor="let idx of database.tables"
      [class]="hasWarnings(idx) ? 'warning' : ''"
      [matTooltip]="hasWarnings(idx) ? 'Table has warnings, please inspect it carefully' : ''"
      [value]="idx">{{idx.name}}</mat-option>
  </mat-select>

</mat-form-field>

<div class="button-strip">

  <mat-checkbox
    *ngIf="database && database.tables && database.tables.length > 0"
    matTooltip="If true will create left joins for all referenced tables in your backend and return foreign field as a part of the result set"
    [(ngModel)]="transformService.join">Left joins</mat-checkbox>

  <mat-checkbox
    *ngIf="database && database.tables && database.tables.length > 0"
    matTooltip="If true will generate all possible QUERY parameters for your read endpoints"
    [(ngModel)]="transformService.verbose">Verbose</mat-checkbox>

  <mat-checkbox
    *ngIf="database && database.tables && database.tables.length > 0"
    [(ngModel)]="transformService.overwrite">Overwrite</mat-checkbox>

  <button
    id="loadButton"
    mat-icon-button
    [disabled]="!authService.access.config.delete_cache_item"
    matTooltip="Empties your server side database declaration cache items and reloads page"
    (click)="refresh()">
    <mat-icon>refresh</mat-icon>
  </button>

  <button
    [disabled]="!database || (database && database.name === 'magic' || (database.tables || []).length === 0)"
    mat-raised-button
    matTooltip="Set default values used for components"
    (click)="setDefaults()">
    Set defaults
  </button>

  <button
    [disabled]="!database || (database && database.name === 'magic' || (database.tables || []).length === 0)"
    mat-raised-button
    color="primary"
    (click)="crudifyAll()">
    Crudify all tables
  </button>

</div>
