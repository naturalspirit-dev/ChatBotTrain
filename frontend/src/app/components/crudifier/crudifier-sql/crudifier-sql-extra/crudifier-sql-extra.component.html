
<div *ngIf="input">

  <h3>Endpoint URLs</h3>

  <mat-form-field class="form-field" appearance="outline">
    <mat-label>Primary</mat-label>
    <input
      matInput
      type="text"
      autocomplete="off"
      matTooltip="Second last parts of URL of endpoint"
      [(ngModel)]="moduleName">
  </mat-form-field>

  <mat-form-field class="form-field" appearance="outline">
    <mat-label>Secondary</mat-label>
    <input
      matInput
      type="text"
      autocomplete="off"
      matTooltip="Last parts of URL of endpoint"
      [(ngModel)]="endpointName">
  </mat-form-field>

  <h3>Arguments</h3>

  <div class="arguments-declaration">

    <button
      mat-icon-button
      matTooltip="Add an argument to your endpoint declaration"
      (click)="addArgument()">
      <mat-icon>add</mat-icon>
    </button>

    <mat-chip-list>
      <mat-chip
        *ngFor="let arg of arguments"
        (click)="addArgumentIntoSql(arg)"
        (removed)="removeArgument(arg)"
        [matTooltip]="arg.name + ' as ' + arg.type + ' - Click to add to SQL'">
        {{arg.name}}
        <mat-icon matChipRemove>cancel</mat-icon>
      </mat-chip>
    </mat-chip-list>

  </div>

  <h3>Miscelanous</h3>

  <mat-form-field class="form-field" appearance="outline">
    <mat-label>HTTP verb</mat-label>
    <mat-select
      matTooltip="HTTP verb endpoint encapsulates"
      [(ngModel)]="verb">
      <mat-option
        *ngFor="let idx of verbs"
        [value]="idx">{{idx}}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field class="form-field" appearance="outline">
    <mat-label>Authorization</mat-label>
    <input
      matInput
      type="text"
      autocomplete="off"
      matTooltip="Comma separated list of roles users must belong to in order to invoke endpoint"
      [(ngModel)]="authorization">
  </mat-form-field>

  <mat-checkbox
    matTooltip="If endpoint should return a list of items or a single item"
    [(ngModel)]="isList">List</mat-checkbox>

  <app-codemirror-sql [(model)]="input"></app-codemirror-sql>

  <div class="button-strip">
    <button
      mat-raised-button
      color="primary"
      [disabled]="moduleName === '' || endpointName === '' || input.sql === '' || !validModuleComponentName()"
      matTooltip="Generates your SQL endpoint"
      (click)="generate()">
      Generate
    </button>
  </div>

</div>
