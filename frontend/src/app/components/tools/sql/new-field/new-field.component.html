<form>

  <div mat-dialog-title>
    Add field to {{this.data.table}}
  </div>

  <div mat-dialog-content>

    <mat-form-field
      class="w-100"
      appearance="outline">
      <mat-label>Name of field</mat-label>
      <input
        matInput
        type="text"
        autocomplete="off"
        name="name"
        [(ngModel)]="data.name">
    </mat-form-field>

    <mat-form-field
      *ngIf="data.name"
      class="w-100"
      appearance="outline">
      <mat-label>Data type</mat-label>
      <mat-select name="datatype"
          [(ngModel)]="data.datatype"
          (selectionChange)="datatypeChanged()">
          <mat-select-trigger>
            {{data.datatype?.name}}
          </mat-select-trigger>
        <mat-option
          *ngFor="let idxDatatype of getDataTypes()"
          class="multiline-mat-option"
          [value]="idxDatatype">
          <span class="d-block name-line">
            {{idxDatatype.name}}
          </span>
          <span class="d-block desc-line">
            {{idxDatatype.description}}
          </span>
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field
      *ngIf="data.datatype?.size"
      class="w-100"
      appearance="outline">
      <mat-label>Size of field ({{data.datatype.size.min + ' - ' + data.datatype.size.max}})</mat-label>
      <input
        matInput
        type="number"
        [min]="data.datatype.size.min"
        [max]="data.datatype.size.max"
        autocomplete="off"
        name="size"
        [(ngModel)]="data.size">
    </mat-form-field>

    <mat-form-field
      *ngIf="data.name && data.datatype?.defaultValue"
      class="w-100"
      appearance="outline">
      <mat-label>Default value</mat-label>
      <input
        matInput
        autocomplete="off"
        name="defaultValue"
        [(ngModel)]="data.defaultValue">
    </mat-form-field>

  </div>

  <div
    mat-dialog-actions
    class="mat-dialog-actions">

    <mat-slide-toggle
      [(ngModel)]="data.acceptNull"
      name="nullable"
      labelPosition="before">Nullable</mat-slide-toggle>

    <button
      mat-raised-button
      [disabled]="!verifyInput()"
      color="primary"
      type="submit"
      aria-label="Creates your field"
      [mat-dialog-close]="data">Create</button>

  </div>

</form>
