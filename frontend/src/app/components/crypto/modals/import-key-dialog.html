
<h1 mat-dialog-title>{{data.id ? ('Edit key ' + data.id) : 'Import crypto key'}}</h1>

<div mat-dialog-content class="dialog">
  
  <mat-form-field style="width: 100%;">
    <textarea
      matInput 
      placeholder="Key"
      matTooltip="Base64/DER encoded public key"
      rows="5"
      (change)="keyChanged()"
      [(ngModel)]="data.content">
    </textarea>
  </mat-form-field>

  <mat-form-field style="width: 100%;">
    <input
      matInput 
      placeholder="Fingerprint" 
      autocomplete="off"
      disabled="true"
      [(ngModel)]="data.fingerprint">
  </mat-form-field>

  <mat-form-field style="width: 100%;">
    <input
      matInput 
      placeholder="Full name" 
      matTooltip="Full name of owner"
      autocomplete="off" 
      [(ngModel)]="data.subject">
  </mat-form-field>

  <mat-form-field style="width: 100%;">
    <input
      matInput 
      placeholder="Domain"
      matTooltip="Domain of owner"
      autocomplete="off" 
      [(ngModel)]="data.domain">
  </mat-form-field>

  <mat-form-field style="width: 100%;">
    <input
      matInput 
      placeholder="Email"
      matTooltip="Email address of owner"
      autocomplete="off" 
      [(ngModel)]="data.email">
  </mat-form-field>
  
  <ngx-codemirror
    *ngIf="initializedVocabulary"
    [(ngModel)]="data.vocabulary"
    class="smaller"
    [options]="getCodeMirrorOptions()"></ngx-codemirror>

  <div
    class="imported"
    matTooltip="Import date"
    *ngIf="data.id">
    {{getDate(data.imported)}}
  </div>
  
</div>

<div mat-dialog-actions>
  <div style="width:100%; text-align: right;">

    <button
      mat-raised-button
      color="primary"
      [disabled]="!data.fingerprint"
      [mat-dialog-close]="data">Ok</button>

    <button
      mat-raised-button
      (click)="close()">Close</button>
      
  </div>
</div>
